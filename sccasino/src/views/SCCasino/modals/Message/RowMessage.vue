<script setup>
import {defineProps, ref} from "vue";
import {toastMessage, confirm} from '@/utils/SCCasino/toast'


defineProps({
    index: Number,
    row: Object,
    columns: Object,
    cellClickOnMobile: String,
    detailKey: String,
});

const isViewDetail = ref(false);

const handleClickRow = () => {
    if (window.innerWidth >= 769) {
        isViewDetail.value = !isViewDetail.value;
    }
};

const handleClickCell = () => {
    if (window.innerWidth < 769) {
        isViewDetail.value = !isViewDetail.value;
    }
};

const handleDelete = (row) => {
    alert("xoá nè");
    confirm('xoá?', () => {
        
        toastMessage.success('Xoá ròi nè')
        
    })
    
};
</script>

<template>
    <tr class="action-row" @click="handleClickRow">
        <td>
            <div class="cell">
                <div class="d-flex justify-center">
                    <span class="in-mobile">No.</span>
                    <span>{{ index }} </span>
                </div>
                <div class="in-mobile">
                    <button @click="()=>handleDelete(row)">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M16.5 4.978V5.205C17.799 5.32379 19.0927 5.49459 20.378 5.717C20.4751 5.73381 20.5678 5.76957 20.6511 5.82224C20.7343 5.87491 20.8063 5.94345 20.8631 6.02396C20.9198 6.10447 20.9601 6.19536 20.9817 6.29145C21.0033 6.38755 21.0058 6.48695 20.989 6.584C20.9722 6.68105 20.9364 6.77383 20.8838 6.85706C20.8311 6.94029 20.7626 7.01233 20.682 7.06906C20.6015 7.1258 20.5106 7.16612 20.4146 7.18773C20.3185 7.20934 20.2191 7.21181 20.122 7.195L19.913 7.16L18.908 20.23C18.8501 20.9836 18.5098 21.6875 17.9553 22.2011C17.4008 22.7146 16.6728 23 15.917 23H8.08401C7.3282 23 6.60026 22.7146 6.04573 22.2011C5.4912 21.6875 5.15095 20.9836 5.09301 20.23L4.08701 7.16L3.87801 7.195C3.78096 7.21181 3.68155 7.20934 3.58546 7.18773C3.48937 7.16612 3.39847 7.1258 3.31796 7.06906C3.15537 6.95448 3.04495 6.78 3.01101 6.584C2.97706 6.38801 3.02236 6.18655 3.13694 6.02396C3.25153 5.86137 3.42601 5.75095 3.62201 5.717C4.90727 5.49433 6.20099 5.32352 7.50001 5.205V4.978C7.50001 3.414 8.71301 2.078 10.316 2.027C11.4387 1.99107 12.5623 1.99107 13.685 2.027C15.288 2.078 16.5 3.414 16.5 4.978ZM10.364 3.526C11.4547 3.49112 12.5463 3.49112 13.637 3.526C14.39 3.55 15 4.184 15 4.978V5.091C13.0018 4.96965 10.9982 4.96965 9.00001 5.091V4.978C9.00001 4.184 9.60901 3.55 10.364 3.526ZM10.009 9.471C10.0052 9.37251 9.98203 9.27573 9.94082 9.1862C9.89961 9.09666 9.84117 9.01612 9.76883 8.94916C9.69649 8.88221 9.61168 8.83017 9.51923 8.79599C9.42678 8.76182 9.3285 8.74619 9.23001 8.75C9.13152 8.75381 9.03474 8.77698 8.9452 8.81819C8.85567 8.8594 8.77512 8.91784 8.70817 8.99018C8.64122 9.06251 8.58917 9.14733 8.555 9.23978C8.52083 9.33223 8.5052 9.43051 8.50901 9.529L8.85601 18.529C8.8637 18.7278 8.95004 18.9154 9.09604 19.0505C9.16833 19.1174 9.25309 19.1694 9.34548 19.2035C9.43787 19.2377 9.53608 19.2533 9.63451 19.2495C9.73293 19.2457 9.82964 19.2225 9.91912 19.1814C10.0086 19.1402 10.0891 19.0818 10.156 19.0095C10.2229 18.9372 10.2749 18.8524 10.3091 18.76C10.3432 18.6676 10.3588 18.5694 10.355 18.471L10.009 9.471ZM15.489 9.529C15.4963 9.42862 15.4834 9.32779 15.4509 9.23251C15.4185 9.13724 15.3672 9.04947 15.3001 8.97444C15.233 8.89941 15.1515 8.83866 15.0604 8.79579C14.9694 8.75292 14.8706 8.72882 14.77 8.72493C14.6694 8.72104 14.5691 8.73743 14.475 8.77312C14.3809 8.80882 14.2949 8.86309 14.2222 8.93271C14.1496 9.00233 14.0916 9.08587 14.0519 9.17834C14.0122 9.27082 13.9915 9.37035 13.991 9.471L13.644 18.471C13.6363 18.6699 13.708 18.8637 13.8432 19.0098C13.9784 19.1559 14.1661 19.2423 14.365 19.25C14.5639 19.2577 14.7577 19.1861 14.9038 19.0508C15.0499 18.9156 15.1363 18.7279 15.144 18.529L15.489 9.529Z"
                                  fill="#757575"/>
                        </svg>
                    </button>
                </div>
            </div>
        </td>
        
        <template v-for="(col, key, index) in columns" :key="index">
            <td
                v-if="key in row"
            >
                <div
                    :class="{
            actionOnMobile: cellClickOnMobile === key,
          }"
                    class="cell"
                    @click="
            () => {
              if (cellClickOnMobile === key) handleClickCell();
            }
          "
                >
                    <div class="in-mobile">
                        <span> {{ columns[key]?.text }} </span>
                    </div>
                    <div class="value">
                        <div v-if="!columns[key]?.isStatus">
                                <span v-if="columns[key]?.callback">
                                  {{ columns[key]?.callback(row, row[key]) }}
                                </span><span v-else> {{ row[key] }}</span>
                        </div>
                        <div v-else>
                            <svg v-if="row[key]" xmlns="http://www.w3.org/2000/svg" width="20" height="21"
                                 viewBox="0 0 20 21" fill="none">
                                <path
                                    d="M2.14282 7.73143L9.75282 11.6893C9.82916 11.729 9.91393 11.7497 9.99997 11.7497C10.086 11.7497 10.1708 11.729 10.2471 11.6893L17.8571 7.73214V14.6071C17.8571 15.2001 17.6303 15.7706 17.2231 16.2016C16.8158 16.6326 16.2591 16.8914 15.6671 16.925L15.5357 16.9286H4.46425C3.8713 16.9286 3.3008 16.7017 2.8698 16.2945C2.4388 15.8873 2.17996 15.3306 2.14639 14.7386L2.14282 14.6071V7.73143ZM4.46425 4.07143H15.5357C16.1286 4.07139 16.6991 4.29825 17.1301 4.70548C17.5611 5.1127 17.82 5.66942 17.8535 6.26143L17.8571 6.39285V6.52428L9.99997 10.61L2.14282 6.52428V6.39285C2.14278 5.7999 2.36965 5.22941 2.77687 4.7984C3.1841 4.3674 3.74082 4.10857 4.33282 4.075L4.46425 4.07143Z"
                                    fill="#64B5F6"/>
                            </svg>
                            <svg v-else xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 20 21"
                                 fill="none">
                                <path
                                    d="M3.33341 7.16667L10.0001 11.3333L16.6667 7.16667L10.0001 3.00001L3.33341 7.16667ZM18.3334 7.16667V15.5C18.3334 15.942 18.1578 16.366 17.8453 16.6785C17.5327 16.9911 17.1088 17.1667 16.6667 17.1667H3.33341C2.89139 17.1667 2.46746 16.9911 2.1549 16.6785C1.84234 16.366 1.66675 15.942 1.66675 15.5V7.16667C1.66675 6.55834 1.99175 6.03334 2.47508 5.74167L10.0001 1.03334L17.5251 5.74167C18.0084 6.03334 18.3334 6.55834 18.3334 7.16667Z"
                                    fill="#7A7A7A"/>
                            </svg>
                        </div>
                    
                    </div>
                </div>
            </td>
            <td v-if="isViewDetail && cellClickOnMobile === key" class="in-mobile">
                <div class="detail-content">
                    <span>{{ row?.subject + " : " + row[detailKey] }}</span>
                </div>
            </td>
        </template>
        
        <td class="cell-action in-desktop">
            <button @click="()=>handleDelete(row)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                          d="M16.5 4.978V5.205C17.799 5.32379 19.0927 5.49459 20.378 5.717C20.4751 5.73381 20.5678 5.76957 20.6511 5.82224C20.7343 5.87491 20.8063 5.94345 20.8631 6.02396C20.9198 6.10447 20.9601 6.19536 20.9817 6.29145C21.0033 6.38755 21.0058 6.48695 20.989 6.584C20.9722 6.68105 20.9364 6.77383 20.8838 6.85706C20.8311 6.94029 20.7626 7.01233 20.682 7.06906C20.6015 7.1258 20.5106 7.16612 20.4146 7.18773C20.3185 7.20934 20.2191 7.21181 20.122 7.195L19.913 7.16L18.908 20.23C18.8501 20.9836 18.5098 21.6875 17.9553 22.2011C17.4008 22.7146 16.6728 23 15.917 23H8.08401C7.3282 23 6.60026 22.7146 6.04573 22.2011C5.4912 21.6875 5.15095 20.9836 5.09301 20.23L4.08701 7.16L3.87801 7.195C3.78096 7.21181 3.68155 7.20934 3.58546 7.18773C3.48937 7.16612 3.39847 7.1258 3.31796 7.06906C3.15537 6.95448 3.04495 6.78 3.01101 6.584C2.97706 6.38801 3.02236 6.18655 3.13694 6.02396C3.25153 5.86137 3.42601 5.75095 3.62201 5.717C4.90727 5.49433 6.20099 5.32352 7.50001 5.205V4.978C7.50001 3.414 8.71301 2.078 10.316 2.027C11.4387 1.99107 12.5623 1.99107 13.685 2.027C15.288 2.078 16.5 3.414 16.5 4.978ZM10.364 3.526C11.4547 3.49112 12.5463 3.49112 13.637 3.526C14.39 3.55 15 4.184 15 4.978V5.091C13.0018 4.96965 10.9982 4.96965 9.00001 5.091V4.978C9.00001 4.184 9.60901 3.55 10.364 3.526ZM10.009 9.471C10.0052 9.37251 9.98203 9.27573 9.94082 9.1862C9.89961 9.09666 9.84117 9.01612 9.76883 8.94916C9.69649 8.88221 9.61168 8.83017 9.51923 8.79599C9.42678 8.76182 9.3285 8.74619 9.23001 8.75C9.13152 8.75381 9.03474 8.77698 8.9452 8.81819C8.85567 8.8594 8.77512 8.91784 8.70817 8.99018C8.64122 9.06251 8.58917 9.14733 8.555 9.23978C8.52083 9.33223 8.5052 9.43051 8.50901 9.529L8.85601 18.529C8.8637 18.7278 8.95004 18.9154 9.09604 19.0505C9.16833 19.1174 9.25309 19.1694 9.34548 19.2035C9.43787 19.2377 9.53608 19.2533 9.63451 19.2495C9.73293 19.2457 9.82964 19.2225 9.91912 19.1814C10.0086 19.1402 10.0891 19.0818 10.156 19.0095C10.2229 18.9372 10.2749 18.8524 10.3091 18.76C10.3432 18.6676 10.3588 18.5694 10.355 18.471L10.009 9.471ZM15.489 9.529C15.4963 9.42862 15.4834 9.32779 15.4509 9.23251C15.4185 9.13724 15.3672 9.04947 15.3001 8.97444C15.233 8.89941 15.1515 8.83866 15.0604 8.79579C14.9694 8.75292 14.8706 8.72882 14.77 8.72493C14.6694 8.72104 14.5691 8.73743 14.475 8.77312C14.3809 8.80882 14.2949 8.86309 14.2222 8.93271C14.1496 9.00233 14.0916 9.08587 14.0519 9.17834C14.0122 9.27082 13.9915 9.37035 13.991 9.471L13.644 18.471C13.6363 18.6699 13.708 18.8637 13.8432 19.0098C13.9784 19.1559 14.1661 19.2423 14.365 19.25C14.5639 19.2577 14.7577 19.1861 14.9038 19.0508C15.0499 18.9156 15.1363 18.7279 15.144 18.529L15.489 9.529Z"
                          fill="#757575"/>
                </svg>
            </button>
        </td>
    </tr>
    <tr v-if="isViewDetail" class="in-desktop">
        <td></td>
        <td :colspan="Object.keys(columns).length - 2">
            {{ row[detailKey] }}
        </td>
        <td></td>
    </tr>
</template>

<style scoped lang="scss">
@media (min-width: 769px) {
    .action-row {
        cursor: pointer;
        
        &:hover {
            transform: scale(0.98);
            transition: transform linear 0.2s;
        }
    }
}

@media (max-width: 768px) {
    .cell.actionOnMobile {
        cursor: pointer;
        
        &:hover {
            transform: scale(0.98);
            transition: transform linear 0.2s;
        }
    }
}
</style>
