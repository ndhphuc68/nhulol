<script setup>
import { navs } from "./data";
import { useStore } from "vuex";
import { computed, watch } from "vue";
import { handleCloseModal } from "@/utils/SCCasino";
import { convertMoney } from "@/utils/SCCasino";
import svgIcon from "@/assets/SCCasino/icon/commons";
import { deleteCookie } from "@/utils/cookie";
import { logoutRequest } from "@/api/auth/request";
import { SSRRequest } from "@/api/axios";
import { useI18n } from "vue-i18n";

// const $emit = defineEmits(["handleToggleSidebar"]);
const { t } = useI18n();
const store = useStore();
const auth = computed(() => store.state.auth.auth);
const activeSidebar = computed(() => store.state.auth.activeSidebar);
const userInfor = computed(() => store.state.user.userInfor);
const openSidebar = computed(() => store.state.auth.sidebar);
const isPartner = computed(() =>
  store.state.user.userInfor.me_partnership_code ? true : false
);

const handleLoggout = async () => {
  store.commit("handleAuth");
  localStorage.removeItem("_slg");
  localStorage.removeItem("mIdx");
  sessionStorage.clear();
  await store.dispatch("clearIntervalAction");
  await store.dispatch("clearIntervalPingAction");
  store.commit("clearWithDraw");
  deleteCookie("MDS");
  deleteCookie("CID");
  deleteCookie("mIdx");
  await logoutRequest();
  // location.reload();
};
const handleShowModal = (key, idx) => {
  store.commit("handleCloseAllModal");
  store.commit("handleToggleSidebar", false);
  store.commit("handleActiveSidebar", idx);
  if (key) {
    setTimeout(() => {
      handleCloseModal(key);
    }, 200);
  }
  if (key === "profile") {
    store.commit("handleActiveNavBottom", 3);
  } else {
    store.commit("handleActiveNavBottom", -1);
  }
};

const handleToggleSidebar = (status) => {
  store.commit("handleToggleSidebar", status);
};

watch(openSidebar, (val) => {
  if (!val) {
    document.querySelector("html").style.overflowY = "scroll";
  } else {
    document.querySelector("html").style.overflowY = "hidden";
  }
});

const doPartnerConvert = () => {
  let config = "width=1550, height=800";

  let url =
      process.env.VUE_APP_META_API_URL +
      `/admin/partner/check_login/${userInfo?.value.me_account}?frontLogin=true`;
  window.open(url, "partner", config);
};

const doSettlement = async () => {
  store.commit("handleUpdateLoading", true);
  if (userInfor?.value.partnerSettleAmount == 0) {
    await store.dispatch("showAlert", {
      type: "error",
      message: t("no_commission"),
    });
    store.commit("handleUpdateLoading", false);
    return;
  }

  let dataFrm = [];

  dataFrm.partnerCode = userInfor?.value.me_partnership_code;
  dataFrm.memberIdx = userInfor?.value.me_idx;
  dataFrm.account = userInfor?.value.me_account;

  const res = await SSRRequest({
    url: "/api/partnership/settlement",
    method: "POST",
    dataFrm,
  });

  if (res?.error == false) {
    if (res.data.transactionMoney == 0) {
      await store.dispatch("showAlert", {
        type: "error",
        message: t("no_commission"),
      });
    } else {
      await store.dispatch("showAlert", {
        type: "error",
        message: t("settlement_error"),
      });
    }
  } else {
    await store.dispatch("showAlert", {
      type: "success",
      message: t("settlement_success"),
    });
  }
  store.commit("handleUpdateLoading", false);
};
</script>

<template>
  <div class="sidebar">
    <div class="in-mobile sidebar-top">
      <button @click="handleToggleSidebar(!openSidebar)">
        <i class="pi pi-times" style="font-size: 1.5rem"></i>
      </button>
    </div>
    <nav class="nav-container">
      <button
        v-for="(nav, index) in navs"
        :key="index"
        class="nav-item"
        :class="{ active: activeSidebar === index }"
        @click="handleShowModal(nav?.key, index)"
      >
        <component class="nav-icon" :is="nav?.icon" />
        <span class="nav-title">{{ $t(nav?.text) }}</span>
      </button>
    </nav>
    <template v-if="auth">
      <div class="betting-info">
        <div class="betting-title">
          <svg
            width="24"
            height="25"
            viewBox="0 0 24 25"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M10.875 8H11.25V11.75H10.875C10.3777 11.75 9.90081 11.5525 9.54918 11.2008C9.19755 10.8492 9 10.3723 9 9.875C9 9.37772 9.19755 8.90081 9.54918 8.54917C9.90081 8.19754 10.3777 8 10.875 8ZM13.875 13.25H12.75V17H13.875C14.3723 17 14.8492 16.8025 15.2008 16.4508C15.5525 16.0992 15.75 15.6223 15.75 15.125C15.75 14.6277 15.5525 14.1508 15.2008 13.7992C14.8492 13.4475 14.3723 13.25 13.875 13.25ZM21.75 12.5C21.75 14.4284 21.1782 16.3134 20.1068 17.9168C19.0355 19.5202 17.5127 20.7699 15.7312 21.5078C13.9496 22.2458 11.9892 22.4389 10.0979 22.0627C8.20656 21.6865 6.46928 20.7579 5.10571 19.3943C3.74215 18.0307 2.81355 16.2934 2.43735 14.4021C2.06114 12.5108 2.25422 10.5504 2.99218 8.76884C3.73013 6.98726 4.97982 5.46451 6.58319 4.39317C8.18657 3.32183 10.0716 2.75 12 2.75C14.585 2.75273 17.0634 3.78084 18.8913 5.60872C20.7192 7.43661 21.7473 9.91498 21.75 12.5ZM17.25 15.125C17.25 14.2299 16.8944 13.3715 16.2615 12.7385C15.6286 12.1056 14.7701 11.75 13.875 11.75H12.75V8H13.125C13.6223 8 14.0992 8.19754 14.4508 8.54917C14.8025 8.90081 15 9.37772 15 9.875C15 10.0739 15.079 10.2647 15.2197 10.4053C15.3603 10.546 15.5511 10.625 15.75 10.625C15.9489 10.625 16.1397 10.546 16.2803 10.4053C16.421 10.2647 16.5 10.0739 16.5 9.875C16.5 8.97989 16.1444 8.12145 15.5115 7.48851C14.8786 6.85558 14.0201 6.5 13.125 6.5H12.75V5.75C12.75 5.55109 12.671 5.36032 12.5303 5.21967C12.3897 5.07902 12.1989 5 12 5C11.8011 5 11.6103 5.07902 11.4697 5.21967C11.329 5.36032 11.25 5.55109 11.25 5.75V6.5H10.875C9.9799 6.5 9.12145 6.85558 8.48852 7.48851C7.85558 8.12145 7.5 8.97989 7.5 9.875C7.5 10.7701 7.85558 11.6285 8.48852 12.2615C9.12145 12.8944 9.9799 13.25 10.875 13.25H11.25V17H10.5C10.0027 17 9.52581 16.8025 9.17418 16.4508C8.82255 16.0992 8.625 15.6223 8.625 15.125C8.625 14.9261 8.54599 14.7353 8.40533 14.5947C8.26468 14.454 8.07392 14.375 7.875 14.375C7.67609 14.375 7.48533 14.454 7.34467 14.5947C7.20402 14.7353 7.125 14.9261 7.125 15.125C7.125 16.0201 7.48058 16.8785 8.11352 17.5115C8.74645 18.1444 9.6049 18.5 10.5 18.5H11.25V19.25C11.25 19.4489 11.329 19.6397 11.4697 19.7803C11.6103 19.921 11.8011 20 12 20C12.1989 20 12.3897 19.921 12.5303 19.7803C12.671 19.6397 12.75 19.4489 12.75 19.25V18.5H13.875C14.7701 18.5 15.6286 18.1444 16.2615 17.5115C16.8944 16.8785 17.25 16.0201 17.25 15.125Z"
              fill="#0189FF"
            />
          </svg>
          <span>
            {{ $t("totalBalance") }}
          </span>
        </div>
        <p class="betting-amount">
          {{ userInfor?.me_money ? convertMoney(userInfor?.me_money) : 0 }}
          {{ $t("won") }}
        </p>
        <div v-if="isPartner" class="betting-title">
          <svg
            width="24"
            height="25"
            viewBox="0 0 24 25"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M10.875 8H11.25V11.75H10.875C10.3777 11.75 9.90081 11.5525 9.54918 11.2008C9.19755 10.8492 9 10.3723 9 9.875C9 9.37772 9.19755 8.90081 9.54918 8.54917C9.90081 8.19754 10.3777 8 10.875 8ZM13.875 13.25H12.75V17H13.875C14.3723 17 14.8492 16.8025 15.2008 16.4508C15.5525 16.0992 15.75 15.6223 15.75 15.125C15.75 14.6277 15.5525 14.1508 15.2008 13.7992C14.8492 13.4475 14.3723 13.25 13.875 13.25ZM21.75 12.5C21.75 14.4284 21.1782 16.3134 20.1068 17.9168C19.0355 19.5202 17.5127 20.7699 15.7312 21.5078C13.9496 22.2458 11.9892 22.4389 10.0979 22.0627C8.20656 21.6865 6.46928 20.7579 5.10571 19.3943C3.74215 18.0307 2.81355 16.2934 2.43735 14.4021C2.06114 12.5108 2.25422 10.5504 2.99218 8.76884C3.73013 6.98726 4.97982 5.46451 6.58319 4.39317C8.18657 3.32183 10.0716 2.75 12 2.75C14.585 2.75273 17.0634 3.78084 18.8913 5.60872C20.7192 7.43661 21.7473 9.91498 21.75 12.5ZM17.25 15.125C17.25 14.2299 16.8944 13.3715 16.2615 12.7385C15.6286 12.1056 14.7701 11.75 13.875 11.75H12.75V8H13.125C13.6223 8 14.0992 8.19754 14.4508 8.54917C14.8025 8.90081 15 9.37772 15 9.875C15 10.0739 15.079 10.2647 15.2197 10.4053C15.3603 10.546 15.5511 10.625 15.75 10.625C15.9489 10.625 16.1397 10.546 16.2803 10.4053C16.421 10.2647 16.5 10.0739 16.5 9.875C16.5 8.97989 16.1444 8.12145 15.5115 7.48851C14.8786 6.85558 14.0201 6.5 13.125 6.5H12.75V5.75C12.75 5.55109 12.671 5.36032 12.5303 5.21967C12.3897 5.07902 12.1989 5 12 5C11.8011 5 11.6103 5.07902 11.4697 5.21967C11.329 5.36032 11.25 5.55109 11.25 5.75V6.5H10.875C9.9799 6.5 9.12145 6.85558 8.48852 7.48851C7.85558 8.12145 7.5 8.97989 7.5 9.875C7.5 10.7701 7.85558 11.6285 8.48852 12.2615C9.12145 12.8944 9.9799 13.25 10.875 13.25H11.25V17H10.5C10.0027 17 9.52581 16.8025 9.17418 16.4508C8.82255 16.0992 8.625 15.6223 8.625 15.125C8.625 14.9261 8.54599 14.7353 8.40533 14.5947C8.26468 14.454 8.07392 14.375 7.875 14.375C7.67609 14.375 7.48533 14.454 7.34467 14.5947C7.20402 14.7353 7.125 14.9261 7.125 15.125C7.125 16.0201 7.48058 16.8785 8.11352 17.5115C8.74645 18.1444 9.6049 18.5 10.5 18.5H11.25V19.25C11.25 19.4489 11.329 19.6397 11.4697 19.7803C11.6103 19.921 11.8011 20 12 20C12.1989 20 12.3897 19.921 12.5303 19.7803C12.671 19.6397 12.75 19.4489 12.75 19.25V18.5H13.875C14.7701 18.5 15.6286 18.1444 16.2615 17.5115C16.8944 16.8785 17.25 16.0201 17.25 15.125Z"
              fill="#0189FF"
            />
          </svg>
          <span>
            {{ $t("commission") }}
          </span>
        </div>
        <p v-if="isPartner" class="betting-amount">
          {{
            userInfor?.partnerSettleAmount
              ? convertMoney(userInfor?.partnerSettleAmount)
              : 0
          }}
          {{ $t("won") }}
        </p>
        <button
          class="btn-betting-history"
          @click="handleShowModal('betting', 0)"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="25"
            viewBox="0 0 24 25"
            fill="none"
          >
            <path
              d="M21 12.5C21 14.2578 20.4853 15.9772 19.5193 17.4459C18.5533 18.9146 17.1783 20.0682 15.5642 20.7644C13.95 21.4605 12.1673 21.6687 10.4362 21.3633C8.70505 21.0578 7.10126 20.2521 5.82281 19.0456C5.75116 18.9779 5.69355 18.8967 5.65326 18.8067C5.61298 18.7167 5.59081 18.6197 5.58802 18.5212C5.58524 18.4226 5.60189 18.3245 5.63702 18.2324C5.67216 18.1403 5.7251 18.056 5.79281 17.9843C5.92957 17.8396 6.1182 17.7552 6.31722 17.7495C6.41577 17.7468 6.5139 17.7634 6.60601 17.7985C6.69812 17.8337 6.78241 17.8866 6.85406 17.9543C7.92632 18.9659 9.2729 19.6391 10.7256 19.8897C12.1782 20.1404 13.6725 19.9574 15.0218 19.3636C16.371 18.7698 17.5153 17.7916 18.3118 16.5512C19.1083 15.3107 19.5215 13.8631 19.5 12.3891C19.4784 10.9152 19.0229 9.48025 18.1905 8.26367C17.358 7.04708 16.1855 6.10279 14.8195 5.54877C13.4535 4.99474 11.9544 4.85557 10.5097 5.14863C9.06504 5.44169 7.73875 6.15399 6.69656 7.19652C6.36563 7.53121 6.05438 7.86027 5.75156 8.18746L7.28063 9.71933C7.38563 9.82422 7.45716 9.95791 7.48615 10.1035C7.51514 10.249 7.50028 10.3999 7.44347 10.5371C7.38665 10.6742 7.29043 10.7913 7.16699 10.8737C7.04354 10.9562 6.89842 11.0001 6.75 11H3C2.80109 11 2.61032 10.9209 2.46967 10.7803C2.32902 10.6396 2.25 10.4489 2.25 10.25V6.49996C2.24988 6.35154 2.29381 6.20642 2.37621 6.08297C2.45861 5.95953 2.57579 5.86331 2.71291 5.80649C2.85002 5.74968 3.00092 5.73482 3.14648 5.76381C3.29204 5.7928 3.42573 5.86432 3.53063 5.96933L4.6875 7.12808C4.98938 6.8009 5.30063 6.47183 5.63063 6.13902C6.88883 4.87867 8.49267 4.01993 10.2391 3.6715C11.9856 3.32307 13.7962 3.5006 15.4417 4.18164C17.0872 4.86267 18.4937 6.01659 19.4832 7.49733C20.4726 8.97807 21.0005 10.7191 21 12.5ZM12 7.24996C11.8011 7.24996 11.6103 7.32898 11.4697 7.46963C11.329 7.61028 11.25 7.80105 11.25 7.99996V12.5C11.25 12.6294 11.2834 12.7567 11.3472 12.8694C11.4109 12.9821 11.5028 13.0764 11.6137 13.1431L15.3638 15.3931C15.4482 15.4438 15.5418 15.4774 15.6393 15.4919C15.7367 15.5065 15.8361 15.5017 15.9316 15.4778C16.0272 15.454 16.1172 15.4115 16.1964 15.3529C16.2755 15.2943 16.3424 15.2207 16.3931 15.1362C16.4438 15.0518 16.4774 14.9581 16.492 14.8607C16.5065 14.7633 16.5017 14.6639 16.4779 14.5683C16.454 14.4727 16.4116 14.3828 16.353 14.3036C16.2943 14.2244 16.2207 14.1576 16.1362 14.1068L12.75 12.0753V7.99996C12.75 7.80105 12.671 7.61028 12.5303 7.46963C12.3897 7.32898 12.1989 7.24996 12 7.24996Z"
              fill="#0189FF"
            />
          </svg>
          <span>
            {{ $t("bettingHistory") }}
          </span>
        </button>
        <button
          v-if="isPartner"
          class="btn-betting-history my-3"
          @click="doPartnerConvert()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="25"
            viewBox="0 0 24 17"
            fill="none"
          >
            <path
              d="M10.2519 12.9959C11.6619 13.1459 12.2519 14.1459 11.7019 15.3659C11.8294 15.5009 12.003 15.583 12.1883 15.596C12.3735 15.609 12.5569 15.5518 12.7019 15.4359C13.0119 15.1959 12.9819 14.8759 12.8119 14.5259C12.785 14.4421 12.7783 14.3532 12.7922 14.2663C12.8061 14.1794 12.8403 14.0971 12.8919 14.0259C12.9619 13.9359 13.2219 13.9359 13.3619 14.0259C13.7219 14.1759 14.0719 14.3959 14.4319 14.5659C14.5124 14.6207 14.6035 14.6579 14.6993 14.675C14.7952 14.6922 14.8936 14.6888 14.988 14.6652C15.0825 14.6416 15.1708 14.5982 15.2473 14.538C15.3239 14.4778 15.3868 14.4021 15.4319 14.3159C15.4738 14.2378 15.499 14.1519 15.506 14.0636C15.5129 13.9753 15.5015 13.8865 15.4723 13.8028C15.4432 13.7191 15.397 13.6424 15.3367 13.5776C15.2764 13.5127 15.2032 13.461 15.1219 13.4259C14.8586 13.2746 14.6136 13.0934 14.3919 12.8859C14.2719 12.7759 14.2819 12.5459 14.2419 12.3659C14.4219 12.3659 14.6419 12.2059 14.7819 12.2659C15.3919 12.5559 15.9719 12.8959 16.5619 13.2159C17.1519 13.5359 17.3919 13.4159 17.5619 13.0559C17.7319 12.6959 17.6919 12.3659 17.2319 12.0559C16.7719 11.7459 16.5419 11.5959 16.1819 11.3759C15.8219 11.1559 15.8119 10.9959 15.9919 10.7859C16.0756 10.7281 16.1717 10.6908 16.2724 10.6769C16.3731 10.663 16.4757 10.6729 16.5719 10.7059C17.3619 11.0659 18.1219 11.4659 18.9019 11.8459C19.4219 12.0959 19.7619 12.0259 19.9819 11.6259C20.2019 11.2259 19.9819 10.9059 19.5319 10.6259L14.0119 7.26586C13.9219 7.26586 13.8019 7.17586 13.7719 7.10586C13.7114 6.93234 13.6613 6.75536 13.6219 6.57586C13.7964 6.50508 13.9837 6.47104 14.1719 6.47586C14.3924 6.56851 14.5979 6.69319 14.7819 6.84586L19.6319 9.76587C19.8719 9.19587 19.6319 8.43586 20.5419 8.36586L18.9419 3.80586L17.6719 4.13586C17.5519 4.13586 17.3719 4.21586 17.3019 4.13586C16.4715 3.69221 15.5525 3.4394 14.6119 3.39586C14.0372 3.25897 13.4517 3.17198 12.8619 3.13586C12.5158 3.11475 12.1703 3.18729 11.8619 3.34586C10.9619 3.86586 10.1019 4.45586 9.23192 5.02586C9.12141 5.11235 9.03526 5.22607 8.98192 5.35586C8.74192 6.06586 8.52192 6.78586 8.29192 7.50586C8.40017 7.63843 8.54063 7.741 8.69986 7.80375C8.85909 7.86649 9.03176 7.88733 9.20135 7.86425C9.37093 7.84117 9.53176 7.77495 9.66843 7.67193C9.8051 7.56891 9.91304 7.43254 9.98192 7.27586C10.1519 6.98586 10.2219 6.64586 10.3919 6.35586C10.494 6.15766 10.6595 5.99927 10.8619 5.90586C11.3513 5.75432 11.8533 5.64722 12.3619 5.58586C12.4629 5.58115 12.5636 5.60044 12.6558 5.64216C12.7479 5.68387 12.8288 5.74683 12.8919 5.82586C13.0119 6.08586 12.8219 6.26586 12.5419 6.32586C12.4344 6.36184 12.324 6.3886 12.2119 6.40586C11.8701 6.40306 11.5367 6.51189 11.2623 6.71584C10.988 6.91979 10.7877 7.20771 10.6919 7.53586C10.5672 7.80875 10.3776 8.04699 10.1396 8.22981C9.90172 8.41263 9.6227 8.5345 9.32689 8.58479C9.03108 8.63508 8.72746 8.61226 8.44249 8.51833C8.15752 8.42439 7.89985 8.26219 7.69192 8.04586C7.6226 7.96742 7.57071 7.87516 7.53969 7.77518C7.50866 7.6752 7.4992 7.56977 7.51192 7.46586C7.76192 6.58586 8.04192 5.72586 8.33192 4.85586C8.38972 4.72573 8.48337 4.61474 8.60192 4.53586C9.60192 3.87586 10.6019 3.23586 11.6019 2.53586C12.1465 2.24931 12.7808 2.18479 13.3719 2.35586C14.5797 2.50823 15.7757 2.74209 16.9519 3.05586C17.2214 3.16755 17.5102 3.22504 17.8019 3.22504C18.0936 3.22504 18.3825 3.16755 18.6519 3.05586C18.4819 2.53586 18.8219 2.37586 19.2319 2.22586L22.8119 0.785865C23.0819 0.675865 23.3619 0.585864 23.5019 0.925864C23.6419 1.26586 23.3419 1.39586 23.0919 1.49586L19.9319 2.76586L19.4619 2.99586L21.6919 9.35586L22.9119 8.90586C23.1619 8.81586 23.4319 8.72586 23.5619 9.06586C23.6919 9.40586 23.4619 9.52586 23.2019 9.61586L21.7619 10.1659C21.3919 10.3059 21.1519 10.2259 21.0319 9.81586C20.9583 9.56451 20.8359 9.33007 20.6719 9.12586C20.5419 9.59587 20.2219 10.0159 20.6219 10.5359C20.7958 10.7916 20.8758 11.0996 20.8485 11.4076C20.8211 11.7156 20.6881 12.0047 20.4719 12.2259C20.2762 12.4516 20.0143 12.6098 19.7234 12.678C19.4326 12.7462 19.1276 12.721 18.8519 12.6059L18.4919 12.4759C18.3019 13.8559 17.5719 14.3359 16.2819 13.9459C16.2589 14.228 16.1585 14.4983 15.9919 14.7271C15.8253 14.956 15.5988 15.1344 15.3373 15.2429C15.0759 15.3514 14.7896 15.3858 14.5099 15.3422C14.2302 15.2986 13.968 15.1788 13.7519 14.9959C13.6819 15.1659 13.6419 15.3359 13.5619 15.4959C13.4763 15.6726 13.3556 15.83 13.2073 15.9587C13.059 16.0874 12.8861 16.1846 12.6991 16.2444C12.512 16.3043 12.3148 16.3255 12.1194 16.3068C11.9239 16.2882 11.7342 16.23 11.5619 16.1359C11.4239 16.0499 11.2645 16.0043 11.1019 16.0043C10.9393 16.0043 10.7799 16.0499 10.6419 16.1359C10.4622 16.2063 10.2702 16.2401 10.0773 16.2354C9.88433 16.2306 9.69426 16.1874 9.51822 16.1082C9.34219 16.029 9.18373 15.9155 9.05215 15.7743C8.92056 15.6331 8.81849 15.467 8.75192 15.2859C8.695 15.1736 8.64816 15.0564 8.61192 14.9359C8.17595 15.0123 7.72723 14.9206 7.35612 14.6794C6.98501 14.4382 6.7191 14.0653 6.61192 13.6359C6.33951 13.6916 6.05746 13.678 5.79167 13.5963C5.52588 13.5146 5.28487 13.3675 5.09076 13.1684C4.89665 12.9693 4.75566 12.7246 4.68073 12.4569C4.6058 12.1891 4.59933 11.9068 4.66192 11.6359C3.36192 11.0959 2.90192 10.0559 3.73192 9.06586L3.10192 8.72586C2.96192 9.10586 2.83192 9.43586 2.72192 9.77586C2.71094 9.84495 2.68364 9.91043 2.64229 9.96686C2.60094 10.0233 2.54673 10.069 2.48416 10.1003C2.42158 10.1316 2.35245 10.1475 2.2825 10.1468C2.21255 10.146 2.14379 10.1285 2.08192 10.0959C1.64192 9.95586 1.21192 9.79587 0.761924 9.65586C0.501924 9.56586 0.301924 9.38587 0.451924 9.12586C0.530109 9.06461 0.620763 9.02123 0.71751 8.99877C0.814258 8.97632 0.914751 8.97532 1.01192 8.99586C1.3768 9.08152 1.73453 9.19519 2.08192 9.33587L4.32192 2.93586L1.01192 1.52586C0.891924 1.52586 0.731924 1.45586 0.671924 1.37586C0.611924 1.29586 0.491924 0.995865 0.541924 0.895865C0.594728 0.823488 0.666734 0.767334 0.749795 0.733756C0.832856 0.700178 0.923657 0.690516 1.01192 0.705865C2.33192 1.23586 3.64192 1.77586 4.94192 2.36586C5.11192 2.44586 5.16192 2.78586 5.32192 3.11586L7.32192 3.51586C7.60192 3.56586 7.84192 3.67586 7.76192 3.99586C7.68192 4.31586 7.43192 4.32587 7.14192 4.26587C6.41192 4.10587 5.67192 3.96586 4.89192 3.81586C4.63192 4.52586 4.38192 5.22586 4.13192 5.93586C3.88192 6.64586 3.75192 7.08586 3.53192 7.65586C3.42192 7.92586 3.44192 8.07586 3.73192 8.21586C3.90831 8.33222 4.108 8.40862 4.31701 8.43971C4.52602 8.47081 4.7393 8.45584 4.94192 8.39586C5.57192 8.17586 6.44192 8.83587 6.63192 9.56586C6.63677 9.65913 6.63677 9.75259 6.63192 9.84587C7.08295 9.81736 7.52766 9.96345 7.87393 10.2539C8.22019 10.5443 8.44147 10.9568 8.49192 11.4059C8.93198 11.3992 9.35823 11.5595 9.68481 11.8545C10.0114 12.1496 10.214 12.5574 10.2519 12.9959ZM7.75192 11.3659C7.55192 11.1559 7.40192 10.8859 7.17192 10.7759C7.06309 10.7465 6.94903 10.742 6.83822 10.7628C6.72742 10.7836 6.62272 10.829 6.53192 10.8959C6.20105 11.1701 5.89334 11.4711 5.61192 11.7959C5.31192 12.1059 5.41192 12.3859 5.69192 12.6659C5.97192 12.9459 6.24192 13.0559 6.56192 12.7459C6.88192 12.4359 7.18192 12.1559 7.47192 11.8359C7.58975 11.6769 7.68405 11.5017 7.75192 11.3159V11.3659ZM7.35192 13.5559C7.56192 13.7659 7.72192 14.0359 7.97192 14.1559C8.19483 14.1881 8.42141 14.1306 8.60192 13.9959C8.80979 13.843 8.99789 13.665 9.16192 13.4659C9.51192 13.0959 9.51192 12.8359 9.16192 12.4659C8.81192 12.0959 8.58192 12.1059 8.16192 12.4659C7.97192 12.6559 7.77192 12.8359 7.59192 13.0459C7.49979 13.1926 7.41954 13.3464 7.35192 13.5059V13.5559ZM10.1619 15.6659C10.4619 15.4059 10.6919 15.2259 10.9019 15.0259C11.2919 14.6459 11.2819 14.4259 10.9019 14.0259C10.5219 13.6259 10.3119 13.6659 9.90192 14.0259C9.78713 14.1138 9.68602 14.2182 9.60192 14.3359C9.52192 14.5359 9.39192 14.8159 9.46192 14.9659C9.66301 15.2149 9.89874 15.4337 10.1619 15.6159V15.6659ZM4.84192 10.8559C5.07924 10.7867 5.29529 10.6588 5.47008 10.484C5.64487 10.3092 5.77276 10.0932 5.84192 9.85586C5.84192 9.53586 5.34192 8.97586 5.12192 9.11586C4.72044 9.37327 4.37932 9.71438 4.12192 10.1159C4.01192 10.3359 4.53192 10.8559 4.84192 10.8559Z"
              fill="#0189FF"
            />
          </svg>
          <span>
            {{ $t("partnerPage") }}
          </span>
        </button>
        <button
          v-if="isPartner"
          class="btn-betting-history"
          @click="doSettlement()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="25"
            viewBox="0 0 24 17"
            fill="none"
          >
            <path
              d="M10.2519 12.9959C11.6619 13.1459 12.2519 14.1459 11.7019 15.3659C11.8294 15.5009 12.003 15.583 12.1883 15.596C12.3735 15.609 12.5569 15.5518 12.7019 15.4359C13.0119 15.1959 12.9819 14.8759 12.8119 14.5259C12.785 14.4421 12.7783 14.3532 12.7922 14.2663C12.8061 14.1794 12.8403 14.0971 12.8919 14.0259C12.9619 13.9359 13.2219 13.9359 13.3619 14.0259C13.7219 14.1759 14.0719 14.3959 14.4319 14.5659C14.5124 14.6207 14.6035 14.6579 14.6993 14.675C14.7952 14.6922 14.8936 14.6888 14.988 14.6652C15.0825 14.6416 15.1708 14.5982 15.2473 14.538C15.3239 14.4778 15.3868 14.4021 15.4319 14.3159C15.4738 14.2378 15.499 14.1519 15.506 14.0636C15.5129 13.9753 15.5015 13.8865 15.4723 13.8028C15.4432 13.7191 15.397 13.6424 15.3367 13.5776C15.2764 13.5127 15.2032 13.461 15.1219 13.4259C14.8586 13.2746 14.6136 13.0934 14.3919 12.8859C14.2719 12.7759 14.2819 12.5459 14.2419 12.3659C14.4219 12.3659 14.6419 12.2059 14.7819 12.2659C15.3919 12.5559 15.9719 12.8959 16.5619 13.2159C17.1519 13.5359 17.3919 13.4159 17.5619 13.0559C17.7319 12.6959 17.6919 12.3659 17.2319 12.0559C16.7719 11.7459 16.5419 11.5959 16.1819 11.3759C15.8219 11.1559 15.8119 10.9959 15.9919 10.7859C16.0756 10.7281 16.1717 10.6908 16.2724 10.6769C16.3731 10.663 16.4757 10.6729 16.5719 10.7059C17.3619 11.0659 18.1219 11.4659 18.9019 11.8459C19.4219 12.0959 19.7619 12.0259 19.9819 11.6259C20.2019 11.2259 19.9819 10.9059 19.5319 10.6259L14.0119 7.26586C13.9219 7.26586 13.8019 7.17586 13.7719 7.10586C13.7114 6.93234 13.6613 6.75536 13.6219 6.57586C13.7964 6.50508 13.9837 6.47104 14.1719 6.47586C14.3924 6.56851 14.5979 6.69319 14.7819 6.84586L19.6319 9.76587C19.8719 9.19587 19.6319 8.43586 20.5419 8.36586L18.9419 3.80586L17.6719 4.13586C17.5519 4.13586 17.3719 4.21586 17.3019 4.13586C16.4715 3.69221 15.5525 3.4394 14.6119 3.39586C14.0372 3.25897 13.4517 3.17198 12.8619 3.13586C12.5158 3.11475 12.1703 3.18729 11.8619 3.34586C10.9619 3.86586 10.1019 4.45586 9.23192 5.02586C9.12141 5.11235 9.03526 5.22607 8.98192 5.35586C8.74192 6.06586 8.52192 6.78586 8.29192 7.50586C8.40017 7.63843 8.54063 7.741 8.69986 7.80375C8.85909 7.86649 9.03176 7.88733 9.20135 7.86425C9.37093 7.84117 9.53176 7.77495 9.66843 7.67193C9.8051 7.56891 9.91304 7.43254 9.98192 7.27586C10.1519 6.98586 10.2219 6.64586 10.3919 6.35586C10.494 6.15766 10.6595 5.99927 10.8619 5.90586C11.3513 5.75432 11.8533 5.64722 12.3619 5.58586C12.4629 5.58115 12.5636 5.60044 12.6558 5.64216C12.7479 5.68387 12.8288 5.74683 12.8919 5.82586C13.0119 6.08586 12.8219 6.26586 12.5419 6.32586C12.4344 6.36184 12.324 6.3886 12.2119 6.40586C11.8701 6.40306 11.5367 6.51189 11.2623 6.71584C10.988 6.91979 10.7877 7.20771 10.6919 7.53586C10.5672 7.80875 10.3776 8.04699 10.1396 8.22981C9.90172 8.41263 9.6227 8.5345 9.32689 8.58479C9.03108 8.63508 8.72746 8.61226 8.44249 8.51833C8.15752 8.42439 7.89985 8.26219 7.69192 8.04586C7.6226 7.96742 7.57071 7.87516 7.53969 7.77518C7.50866 7.6752 7.4992 7.56977 7.51192 7.46586C7.76192 6.58586 8.04192 5.72586 8.33192 4.85586C8.38972 4.72573 8.48337 4.61474 8.60192 4.53586C9.60192 3.87586 10.6019 3.23586 11.6019 2.53586C12.1465 2.24931 12.7808 2.18479 13.3719 2.35586C14.5797 2.50823 15.7757 2.74209 16.9519 3.05586C17.2214 3.16755 17.5102 3.22504 17.8019 3.22504C18.0936 3.22504 18.3825 3.16755 18.6519 3.05586C18.4819 2.53586 18.8219 2.37586 19.2319 2.22586L22.8119 0.785865C23.0819 0.675865 23.3619 0.585864 23.5019 0.925864C23.6419 1.26586 23.3419 1.39586 23.0919 1.49586L19.9319 2.76586L19.4619 2.99586L21.6919 9.35586L22.9119 8.90586C23.1619 8.81586 23.4319 8.72586 23.5619 9.06586C23.6919 9.40586 23.4619 9.52586 23.2019 9.61586L21.7619 10.1659C21.3919 10.3059 21.1519 10.2259 21.0319 9.81586C20.9583 9.56451 20.8359 9.33007 20.6719 9.12586C20.5419 9.59587 20.2219 10.0159 20.6219 10.5359C20.7958 10.7916 20.8758 11.0996 20.8485 11.4076C20.8211 11.7156 20.6881 12.0047 20.4719 12.2259C20.2762 12.4516 20.0143 12.6098 19.7234 12.678C19.4326 12.7462 19.1276 12.721 18.8519 12.6059L18.4919 12.4759C18.3019 13.8559 17.5719 14.3359 16.2819 13.9459C16.2589 14.228 16.1585 14.4983 15.9919 14.7271C15.8253 14.956 15.5988 15.1344 15.3373 15.2429C15.0759 15.3514 14.7896 15.3858 14.5099 15.3422C14.2302 15.2986 13.968 15.1788 13.7519 14.9959C13.6819 15.1659 13.6419 15.3359 13.5619 15.4959C13.4763 15.6726 13.3556 15.83 13.2073 15.9587C13.059 16.0874 12.8861 16.1846 12.6991 16.2444C12.512 16.3043 12.3148 16.3255 12.1194 16.3068C11.9239 16.2882 11.7342 16.23 11.5619 16.1359C11.4239 16.0499 11.2645 16.0043 11.1019 16.0043C10.9393 16.0043 10.7799 16.0499 10.6419 16.1359C10.4622 16.2063 10.2702 16.2401 10.0773 16.2354C9.88433 16.2306 9.69426 16.1874 9.51822 16.1082C9.34219 16.029 9.18373 15.9155 9.05215 15.7743C8.92056 15.6331 8.81849 15.467 8.75192 15.2859C8.695 15.1736 8.64816 15.0564 8.61192 14.9359C8.17595 15.0123 7.72723 14.9206 7.35612 14.6794C6.98501 14.4382 6.7191 14.0653 6.61192 13.6359C6.33951 13.6916 6.05746 13.678 5.79167 13.5963C5.52588 13.5146 5.28487 13.3675 5.09076 13.1684C4.89665 12.9693 4.75566 12.7246 4.68073 12.4569C4.6058 12.1891 4.59933 11.9068 4.66192 11.6359C3.36192 11.0959 2.90192 10.0559 3.73192 9.06586L3.10192 8.72586C2.96192 9.10586 2.83192 9.43586 2.72192 9.77586C2.71094 9.84495 2.68364 9.91043 2.64229 9.96686C2.60094 10.0233 2.54673 10.069 2.48416 10.1003C2.42158 10.1316 2.35245 10.1475 2.2825 10.1468C2.21255 10.146 2.14379 10.1285 2.08192 10.0959C1.64192 9.95586 1.21192 9.79587 0.761924 9.65586C0.501924 9.56586 0.301924 9.38587 0.451924 9.12586C0.530109 9.06461 0.620763 9.02123 0.71751 8.99877C0.814258 8.97632 0.914751 8.97532 1.01192 8.99586C1.3768 9.08152 1.73453 9.19519 2.08192 9.33587L4.32192 2.93586L1.01192 1.52586C0.891924 1.52586 0.731924 1.45586 0.671924 1.37586C0.611924 1.29586 0.491924 0.995865 0.541924 0.895865C0.594728 0.823488 0.666734 0.767334 0.749795 0.733756C0.832856 0.700178 0.923657 0.690516 1.01192 0.705865C2.33192 1.23586 3.64192 1.77586 4.94192 2.36586C5.11192 2.44586 5.16192 2.78586 5.32192 3.11586L7.32192 3.51586C7.60192 3.56586 7.84192 3.67586 7.76192 3.99586C7.68192 4.31586 7.43192 4.32587 7.14192 4.26587C6.41192 4.10587 5.67192 3.96586 4.89192 3.81586C4.63192 4.52586 4.38192 5.22586 4.13192 5.93586C3.88192 6.64586 3.75192 7.08586 3.53192 7.65586C3.42192 7.92586 3.44192 8.07586 3.73192 8.21586C3.90831 8.33222 4.108 8.40862 4.31701 8.43971C4.52602 8.47081 4.7393 8.45584 4.94192 8.39586C5.57192 8.17586 6.44192 8.83587 6.63192 9.56586C6.63677 9.65913 6.63677 9.75259 6.63192 9.84587C7.08295 9.81736 7.52766 9.96345 7.87393 10.2539C8.22019 10.5443 8.44147 10.9568 8.49192 11.4059C8.93198 11.3992 9.35823 11.5595 9.68481 11.8545C10.0114 12.1496 10.214 12.5574 10.2519 12.9959ZM7.75192 11.3659C7.55192 11.1559 7.40192 10.8859 7.17192 10.7759C7.06309 10.7465 6.94903 10.742 6.83822 10.7628C6.72742 10.7836 6.62272 10.829 6.53192 10.8959C6.20105 11.1701 5.89334 11.4711 5.61192 11.7959C5.31192 12.1059 5.41192 12.3859 5.69192 12.6659C5.97192 12.9459 6.24192 13.0559 6.56192 12.7459C6.88192 12.4359 7.18192 12.1559 7.47192 11.8359C7.58975 11.6769 7.68405 11.5017 7.75192 11.3159V11.3659ZM7.35192 13.5559C7.56192 13.7659 7.72192 14.0359 7.97192 14.1559C8.19483 14.1881 8.42141 14.1306 8.60192 13.9959C8.80979 13.843 8.99789 13.665 9.16192 13.4659C9.51192 13.0959 9.51192 12.8359 9.16192 12.4659C8.81192 12.0959 8.58192 12.1059 8.16192 12.4659C7.97192 12.6559 7.77192 12.8359 7.59192 13.0459C7.49979 13.1926 7.41954 13.3464 7.35192 13.5059V13.5559ZM10.1619 15.6659C10.4619 15.4059 10.6919 15.2259 10.9019 15.0259C11.2919 14.6459 11.2819 14.4259 10.9019 14.0259C10.5219 13.6259 10.3119 13.6659 9.90192 14.0259C9.78713 14.1138 9.68602 14.2182 9.60192 14.3359C9.52192 14.5359 9.39192 14.8159 9.46192 14.9659C9.66301 15.2149 9.89874 15.4337 10.1619 15.6159V15.6659ZM4.84192 10.8559C5.07924 10.7867 5.29529 10.6588 5.47008 10.484C5.64487 10.3092 5.77276 10.0932 5.84192 9.85586C5.84192 9.53586 5.34192 8.97586 5.12192 9.11586C4.72044 9.37327 4.37932 9.71438 4.12192 10.1159C4.01192 10.3359 4.53192 10.8559 4.84192 10.8559Z"
              fill="#0189FF"
            />
          </svg>
          <span>
            {{ $t("settlement") }}
          </span>
        </button>
      </div>
      <div class="sidebar-bottom in-mobile">
        <hr />
        <div class="btn-sidebar-bottom">
          <div>
            <component class="icon" :is="svgIcon.AccountIcon" />
          </div>
          <span class="user-name">{{ userInfor?.me_account }}</span>
        </div>
        <button class="btn-sidebar-bottom" @click="handleLoggout">
          <component class="icon" :is="svgIcon.LogoutIcon" />
          <span class="user-name">{{ $t("logout") }}</span>
        </button>
      </div>
    </template>
    <div v-else class="sidebar-bottom in-mobile">
      <hr />
      <div class="auth-group">
        <button
          class="btn-auth"
          @click="
            store.commit('handleToggle', 'login');
            store.commit('handleToggleSidebar', false);
          "
        >
          {{ $t("login") }}
        </button>
        <button
          class="btn-auth"
          @click="
            store.commit('handleToggle', 'signUp');
            store.commit('handleToggleSidebar', false);
          "
        >
          {{ $t("register") }}
        </button>
      </div>
    </div>
  </div>

  <div class="overlay" />
</template>

<style scoped lang="scss">
.in-mobile {
  display: none;
}

.sidebar {
  height: 100%;
  overflow: auto;

  &::-webkit-scrollbar {
    display: none;
  }

  .sidebar-top {
    text-align: left;
    margin: 2rem 0;
  }

  .nav-container {
    display: flex;
    flex-direction: column;
    padding: 1.25rem;
    border-radius: 10px;
    background: #f2f2f2;

    .nav-item {
      text-align: left;
      padding: 1rem 0;
      display: flex;
      align-items: center;

      .nav-icon {
        margin-right: 0.5rem;
      }

      .nav-title {
        color: var(--text-secondSCCasino);
      }

      &:hover,
      &.active {
        .nav-title {
          color: var(--primarySCCasino);
        }
      }
    }
  }

  .betting-info {
    padding: 1.25rem;
    border-radius: 10px;
    background: #f2f2f2;
    margin-top: 1.25rem;

    .betting-title {
      display: flex;
      align-items: center;

      svg {
        margin-right: 0.5rem;
      }

      span {
        color: var(--text-secondSCCasino);
      }
    }

    .betting-amount {
      overflow: hidden;
      text-overflow: ellipsis;
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--primarySCCasino);
    }

    .btn-betting-history {
      width: 100%;
      text-align: left;
      display: flex;
      align-items: center;

      &:hover {
        opacity: 0.8;
        transform: scale(0.98);
        transition: all linear 0.2s;
      }

      svg {
        margin-right: 0.5rem;
      }
    }
  }

  .sidebar-bottom {
    .btn-sidebar-bottom {
      display: flex;
      text-decoration: none;
      //justify-content: space-between;
      width: 100%;
      margin: 1.5rem 0;
      color: var(--text-secondSCCasino);
      align-items: center;

      .icon {
        width: 2rem;
      }

      .user-name {
        margin-left: 0.8rem;
        text-overflow: ellipsis;
        overflow: hidden;
        text-align: left;
        white-space: nowrap;
      }

      &:hover {
        transform: scale(0.98);
        transition: all linear 0.2s;
      }
    }

    .auth-group {
      display: flex;
      @media (max-width: 375px) {
        justify-content: center;
      }

      .btn-auth {
        padding: 0.3rem 1rem;
        position: relative;
        font-weight: 500;

        &:nth-child(1) {
          &::after {
            content: "";
            position: absolute;
            height: 70%;
            top: 10%;
            left: 100%;
            border-right: 1px solid #7a7a7a;
          }
        }

        &:hover {
          color: var(--primarySCCasino);
          transform: scale(0.97);
          opacity: 0.8;
          transition: all linear 0.2s;
        }
      }
    }
  }
}

@media (max-width: 1024px) {
  .sidebar {
    position: absolute;
    width: 100%;
    z-index: 5;
    background: var(--bgSCCasino);
    padding: 1.25rem;
    top: 0;
    left: 0;
  }
  .in-mobile {
    display: block;
  }
}
</style>
<style lang="scss">
.sidebar {
  .nav-item.active,
  .nav-item:hover {
    .nav-icon {
      &.stroke {
        path {
          stroke: var(--primarySCCasino);
        }
      }

      &.fill {
        path {
          fill: var(--primarySCCasino);
        }
      }
    }
  }

  .nav-item:hover {
    transform: scale(0.97);
    transition: all linear 0.2s;
  }
}
</style>
